---
title: "Introduction to metalite.ae"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to metalite.ae}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
resource_files:
   - fig/*.png
   - rtf/*.rtf
   - pdf/*.pdf
---

```{r, include=FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  out.width = "100%",
  dpi = 150,
  eval = TRUE
)
```

```{r, include=FALSE}
library(metalite)
library(metalite.ae)
```

## Overview

metalite.ae is an R package to analyze adverse events (AE) in clinical trials including:

<details><summary>AE summary.</summary><img src="https://merck.github.io/metalite.ae/articles/fig/ae0summary.png"></details>
<details><summary>Specific AE analysis.</summary><img src="https://merck.github.io/metalite.ae/articles/fig/ae0specific.png"></details> 
<details><summary>AE listing.</summary><img src="https://merck.github.io/metalite.ae/articles/fig/ae0listing.png"></details>  

The R package simplifies the workflow to create production-ready table, listing and figures discussed in the 
[Chpater 7](https://r4csr.org/aesummary.html) and [Chapter 8](https://r4csr.org/specific-ae.html) of 
the R for Clinical Study Reports and Submission book with full tractability. 

The R package is created using the [metalite](https://merck.github.io/metalite/) data structure 
that provide end-to-end software development lifecycle (SDLC) solution 
including define, develop, validate and finalize the analysis with full .

### Workflow


The general workflow split into:

1. Define metadata information using the metalite package.
1. Prepare outdata using `prepare_*()` functions.
1. (optional) Extend outdata using `extend_*()` functions.
1. Format outdata using `format_*()` functions.
1. Create TLFs using `tlf_*()` functions.

For example, we can create a simple AE summary table as below.

```{r, eval = FALSE}
meta_ae_example() |>                                      # Example AE data created using metalite 
  prepare_ae_summary(
    population = "apat",                                  # select population by keywords
    observation = "wk12",                                 # select observation by keywords
    parameter = "any;rel;ser"                             # select AE terms by keywords 
  ) |>
  format_ae_summary() |>                                  
  tlf_ae_summary(
    source = "Source:  [CDISCpilot: adam-adsl; adae]",    # define data source
    path_outtable = "ae0summary.rtf"                      # define output 
  )
```

```{r, out.width = "100%", out.height = "400px", echo = FALSE, fig.align = "center"}
knitr::include_graphics("pdf/ae0summary1.pdf")
```

Tutorials with additional examples are listed in the [package website](https://merck.github.io/metalite.ae/articles/index.html)

### Highlighted features

- Avoid duplicated input by using metadata structure.
  + e.g. define analysis population one time to use in all adverse events analysis.
- Consistent input and output in standard functions.
- Streamlines mock table generation.
